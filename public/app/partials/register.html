<div class="container">
  <div class="container center-block">
    <div class="row">
      <div class="align-center">
        <img src="/img/logos/green-logo-footer.png">
      </div>
      <div ng-if="!userRegistered">
        <hr/>
        <div class="row">
          <div class="col-md-4">
            <span profile-picture="user" class="img-circle profile-picture pull-right">
            </span>
          </div>
          <div class="col-md-8">
            <h2>{{ 'forms.welcome_to' | translate }}</h2>
            <h2>
              {{ 'forms.you_are_connecting_with' | translate: 'Facebook' }}
              <span ng-if="isNetworkConnection('facebook')" class="btn-facebook padding10">
                <i class="fa fa-facebook"></i> Facebook
              </span>
              <span ng-if="isNetworkConnection('twitter')" class="btn-twitter padding10">
                <i class="fa fa-twitter"></i> Twitter
              </span>
              <span ng-if="isNetworkConnection('google')" class="btn-google-plus padding10">
                <i class="fa fa-google-plus"></i> Google
              </span>
            </h2>
          </div>
        </div>
      </div>
      <hr/>
    </div>
    <div class="row">
      <form ng-if="!emailChecked" name="checkEmailForm" class="form-horizontal">
        <h3 class="align-center">
          {{ 'forms.let_us_see_if_we_know_your_email' | translate }}
        </h3>
        <div class="col-md-4 col-md-offset-4 margin-top">
          <div class="form-group" ng-class="{'has-error': checkEmailForm.email.$dirty && checkEmailForm.email.$invalid}">
            <input ng-model="user.email" type="email" id="email" name="email" class="form-control" placeholder="Email" required>
          </div>
          <div class="form-group">
            <button ng-disabled="checkEmailForm.$invalid" ng-click="checkEmail()" type="button" class="btn btn-info btn-lg btn-block">{{ 'forms.check_email' | translate }}</button>
          </div>
        </div>
      </form>
      <div ng-if="emailChecked && !userRegistered">
        <form ng-if="!userFound" name="registerForm" class="form-horizontal">
          <h3 class="align-center">
            {{ 'forms.we_dont_know_your_email' | translate }}
          </h3>
          <div class="col-md-6 col-md-offset-3 margin-top">
            <div class="form-group">
              <label for="email" class="col-md-4">
                Email
              </label>
              <div class="col-md-8">
                <input ng-model="user.email" type="email" id="email" name="email" class="form-control" disabled>
              </div>
            </div>
            <div class="form-group">
              <label for="name" class="col-md-4">
                {{ 'forms.name' | translate }}
              </label>
              <div class="col-md-8" ng-class="{'has-error': registerForm.name.$dirty && registerForm.name.$invalid}">
                <input ng-model="user.name" type="text" id="name" name="name" class="form-control" required>
              </div>
            </div>
            <div class="form-group">
              <label for="password" class="col-md-4">
                {{ 'forms.password' | translate }}
              </label>
              <div class="col-md-8" ng-class="{'has-error': registerForm.password.$dirty && registerForm.password.$invalid}">
                <input ng-model="user.password" type="password" id="password" name="password" class="form-control" required>
                <div ng-password-strength="user.password"></div>
              </div>
            </div>
            <div class="form-group">
              <label for="password_confirmed" class="col-md-4">
                {{ 'forms.confirm_your_password' | translate }}
              </label>
              <div class="col-md-8" ng-class="{'has-error': registerForm.password_confirmed.$dirty && registerForm.password_confirmed.$invalid}">
                <input ng-model="password_confirmed" type="password" id="password_confirmed" name="password_confirmed" class="form-control" required password-check="user.password">
              </div>
            </div>
            <div class="form-group">
              <button ng-disabled="registerForm.$invalid" ng-click="register()" type="button" class="btn btn-primary btn-lg btn-block">{{ 'forms.register' | translate }}</button>
            </div>
          </div>
        </form>
        <form ng-if="userFound" name="confirmForm" class="form-horizontal">
          <h3 class="align-center">
            {{ 'forms.ok_we_know_your_email' | translate: {user: userFound.name} }}
          </h3>
          <div class="col-md-6 col-md-offset-3 margin-top">
            <div class="form-group">
              <label for="email" class="col-md-4">
                Email
              </label>
              <div class="col-md-8">
                <input ng-model="userFound.email" type="email" id="email" name="email" class="form-control" disabled>
              </div>
            </div>
            <div class="form-group">
              <label for="password" class="col-md-4">
                {{ 'forms.password' | translate }}
              </label>
              <div class="col-md-8" ng-class="{'has-error': confirmForm.password.$dirty && confirmForm.password.$invalid}">
                <input ng-model="userFound.password" type="password" id="password" name="password" class="form-control" required>
              </div>
            </div>
            <div class="form-group">
              <button ng-disabled="confirmForm.$invalid" ng-click="confirm()" type="button" class="btn btn-primary btn-lg btn-block">{{ 'forms.confirm' | translate }}</button>
            </div>
          </div>
        </form>
      </div>
      <div ng-if="userRegistered" class="align-center">
        <h2>{{ 'forms.thank_you' | translate: {user: user.name} }}
        <h3>
          {{ 'forms.now_you_are_connected_with' | translate }}
          <span ng-if="isNetworkConnection('facebook')" class="btn-facebook padding10">
            <i class="fa fa-facebook"></i> Facebook
          </span>
          <span ng-if="isNetworkConnection('twitter')" class="btn-twitter padding10">
            <i class="fa fa-twitter"></i> Twitter
          </span>
          <span ng-if="isNetworkConnection('google')" class="btn-google-plus padding10">
            <i class="fa fa-google-plus"></i> Google
          </span>
        </h3>
        <div class="jumbotron">
          <div ng-if="previousState">
            <h2>{{ 'forms.wait_a_moment_you_will_be_redirected' | translate }}</h2>
            <h2>{{ 'or' | translate }}</h2>
          </div>
          <h2>
            <a ui-sref="app.user({locale: locale(), id: user.id})">
              {{ 'forms.click_here_to_see_your_profile' | translate }}
            </a>
          </h2>
        </div>
      </div>
    </div>
  </div>
</div>